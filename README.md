Flow Free Solver

נכתב ע"י נועה וולפגור ושחר בר

הקדמה - flow free הוא משחק הזמין בapp store או בplay store ומכיל מאות פאזלים
כל פאזל מורכב מלוח בצורת מלבן, עם משבצות, חלקן ריקות ועל חלקן יש כדורים בשלל צבעים
המטרה בפאזל היא לחבר כל זוג עיגולים בצבעים תואמים במסלול רצוף
דרך המשבצות בלוח, כך שבכל משבצת יהיה צבע יחיד.

המטרה שלנו היא למצוא פתרון ללוח נתון.
arc consistencyהשתמשנו באלגוריתם גנטי וב
עלמנת לפתור את הפאזל.

הסבר על אלגוריתמים גנטיים:
אלגוריתם גנטי מבוסס על עקרון הברירה הטבעית שהניעה את האבולוצייה בעולם שלנו.
לפי העקרון הזה החזק שורד והגנים של החזק מועברים לדור הבא.
במקרים נדירים ישנם מוטציות שלעיתים תורמות ולעיתים מזיקות להתפתחות הזן.
בהתאם לכך, האלגוריתם מייצר אוכלוסייה בסיסית של פתרונות לבעיה כלשהי,
אותה אוכלוסייה היא הדור הראשון של הפתרונות, בכל דור ניתן דירוג לכל פתרון
ככל שהדירוג גבוה יותר הסבירות שהגנים שלו יעברו לדור הבא גדלה
מתבצע תהליך של מיזוג של שני פתרונות בהתאם לדירוג שלהם, המיזוג קורה בהתאם לבעיה הנתונה, ובכל דור יש סיכוי נמוך למוטציה שמוסיפה אלמנט אקראי נוסף לאלגוריתם.

הסבר על arc consistency:
בבעיות בהן יש אילוצים שחייבים להתקיים ניתן להשתמש בקונספט שנקרא arc consistency
כדי לאתר פתרון שמקיים את האילוצים.
דוגמא לשימוש בבעיה שלנו, בהנתן לוח ריק, נבדוק אם יש כדור שחייב להתחיל מסלול בכיוון מסויים,
אם כן נכפה על המשבצת הזו להיות ההתחלה של המסלול של הכדור, לאחר העדכון הזה, יכול להיות שיווצרו אילוצים נוספים, וכתוצאה מהם אילוצים נוספים.
את הלוח שיבנה כתוצאה מכלל האילוצים ביחד נעביר לאלגוריתם הגנטי כלוח הבסיס, שלא ניתן לשנות בו דבר, ובכך נקטין את הבעיה. במקרה שלנו, הקטנה של הבעיה מקטינה בצורה משמעותית את החישוב, שכן כל משבצת נוספת מקשה על האלגוריתם יותר מהקודמת.

בהתחלה השתמשנו בפותרן בסיסי עם אלגוריתם גנטי פשוט בצורה הבאה:
בשלב היצירה של האוכלוסייה, נבחר צבע אקראי לכל משבצת שאינה כדור נתון
בשלב הדירוג, רק משבצת חוקית - שהיא כדור ויש לה שכן יחיד באותו הצבע, או שאינה כדור ויש לה שני שכנים באותו הצבע תקבל נקודה
נבצע מיזוג ע"י לקיחת השורות העליונות מהלוח הראשון ואת השורות התחתונות מהלוח השני
מוטציה תשנה תא אקראי בתנאי שאינו כדור
הפותרן הצליח להתמודד עם לוחות עד גודל 6 בצורה עקבית, אך סיכויי ההצלחה שלו קטנו עם לוחות גדולים יותר, ונדרש להגדיל בצורה לא סבירה את כמות הדורות והאוכלוסייה.


בגרסא הסופית של הפותרן בחרנו לשנות כמה מהעקרונות הללו, בצורה הבאה:
תחילה ירוץ אלגוריתם arc consistency שימצא משבצות שניתן לקבע בהכרח לצבע מסויים
במידה ונשארו משבצות ללא צבע נריץ אלגוריתם גנטי שמייצר באקראי מסלולים שנאמנים לאילוצים מהשלב הקודם.
המסלולים יכולים לדרוס מסלולים אחרים, על זה נוריד נקודות בדירוג
נמזג את הלוחות בצורה הבאה: (להשלים)
בדרך הזו האלגוריתם מצליח לפתור לוחות עד גודל 10 בצורה עקבית


